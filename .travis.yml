dist:     trusty
sudo:     required

language: c

os:
    - linux

compiler:
    - gcc

before_script:
  - sudo apt-get install -y libgtest-dev
  - cd /usr/src/gtest
  - sudo cmake CMakeLists.txt
  - sudo make
  - sudo cp *.a /usr/lib
  - cd "${TRAVIS_BUILD_DIR}"
  - cmake .
  - make
  - ./tests

addons:
  apt:
    packages:
      - lcov
      - valgrind
      - cppcheck
      - make
      - cmake
      - libgtest-dev

script:
    # скрипт сборки и тестирования проекта:
    - sudo apt install cmake
    - sudo apt-get install libgtest-dev
    - cd homework_1_5
    - mkdir build
    - cd build
    - cmake ..
    - make
    - ./letterTest
    - ctest --output-on-failure
    - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then valgrind --tool=memcheck --leak-check=yes ctest; fi
    - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then valgrind --tool=memcheck --leak-check=yes ./task1.out grass 1; fi
    - cd ..
    - if [[ "$TRAVIS_OS_NAME" == "linux" ]]; then cppcheck --error-exitcode=1 -I project/include ./project/tst ./project/src ./project/include/*.h; fi